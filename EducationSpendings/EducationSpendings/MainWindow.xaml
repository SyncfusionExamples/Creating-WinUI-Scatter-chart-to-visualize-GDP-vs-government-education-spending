<Window
    x:Class="EducationSpendings.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:chart="using:Syncfusion.UI.Xaml.Charts"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:slider="using:Syncfusion.UI.Xaml.Sliders"   
    xmlns:local="using:EducationSpendings.RoundConverter"
    mc:Ignorable="d"
    Title="Expenditure on education as share of government spending">

    <Border Padding="3" 
         Margin="5" 
         Background="#FFFBD5">

        <Grid x:Name="MainChart">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <Grid.Resources>
                <local:RoundConverter x:Key="RoundConverter"/>
            </Grid.Resources>

            <chart:SfCartesianChart HorizontalHeaderAlignment="Left">

                <!-- Chart Header -->
                <chart:SfCartesianChart.Header>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <Image Source="Assets/financial-literacy.png"
                   Width="40" Height="30"
                   Margin="10,3,2,0"/>
                        <TextBlock FontSize="20"
                       Text="Expenditure on education as share of government spending"
                       VerticalAlignment="Center"
                       Foreground="#333333"
                       FontWeight="SemiBold"
                       Margin="0,0,5,0"/>
                    </StackPanel>
                </chart:SfCartesianChart.Header>

                <!-- Chart Resources -->
                <chart:SfCartesianChart.Resources>
                    
                    <Style TargetType="Line" x:Key="xDashedGridLineStyle">
                        <Setter Property="Stroke" Value="Black"/>
                        <Setter Property="StrokeThickness" Value="1"/>
                        <Setter Property="StrokeDashArray" Value="4,2"/>
                    </Style>

                    <Style TargetType="Line" x:Key="yDashedGridLineStyle">
                        <Setter Property="Stroke" Value="Black"/>
                        <Setter Property="StrokeThickness" Value="1"/>
                        <Setter Property="StrokeDashArray" Value="4,2"/>
                    </Style>

                    <Style TargetType="Line" x:Key="xAxisLineStyle">
                        <Setter Property="StrokeThickness" Value="1"/>
                        <Setter Property="Stroke" Value="Black"/>
                    </Style>

                    <Style TargetType="Line" x:Key="yAxisLineStyle">
                        <Setter Property="StrokeThickness" Value="1"/>
                        <Setter Property="Stroke" Value="Black"/>
                    </Style>

                    <DataTemplate x:Key="headerTemplate">
                        <TextBlock Text="Total across all levels of education (% of GDP)"
                       FontSize="15"
                       FontWeight="Medium"
                       Margin="3"/>
                    </DataTemplate>

                    <!-- Legend Header Template -->
                    <DataTemplate x:Key="legendHeader">
                        <TextBlock Text="Education Spending by Region"
                       HorizontalAlignment="Left"
                       TextWrapping="Wrap"
                       FontSize="15"
                       FontWeight="Bold"
                       Margin="5,0,5,0"/>
                    </DataTemplate>

                    <!-- Tooltip Template -->
                    <DataTemplate x:Key="customTooltipTemplate">
                        <StackPanel Background="Black" MaxWidth="180" Padding="5">
                            <!-- Country Name -->
                            <TextBlock Text="{Binding Item.Country}"
                               FontWeight="ExtraBold"
                               FontSize="14"
                               Foreground="White"
                               TextWrapping="Wrap"
                               HorizontalAlignment="Center"/>
                            <Line Stretch="Fill"
                              X2="1"
                              Stroke="White"
                              StrokeThickness="1"
                              Margin="0,0,0,0"/>
                            <!-- GDP Spent -->

                            <TextBlock FontSize="12" FontWeight="SemiBold" Foreground="White" Margin="0,2,0,2">
                                <Run Text="Education (% of GDP) : " />
                                <Run Text="{Binding Item.GDPSpent, Converter={StaticResource RoundConverter}}" />
                                <Run Text="%" />
                            </TextBlock>
                            
                            <!-- Government Spending -->

                            <TextBlock FontSize="12" FontWeight="SemiBold" Foreground="White" Margin="0,2,0,2">
                                <Run Text="Govt Spending Share : " />
                                <Run Text="{Binding Item.GovtSpent, Converter={StaticResource RoundConverter}}" />
                                <Run Text="%" /> 
                            </TextBlock>

                        </StackPanel>
                    </DataTemplate>

                </chart:SfCartesianChart.Resources>

                <!-- X Axis -->
                <chart:SfCartesianChart.XAxes>
                    <chart:NumericalAxis Minimum="0"
                             Maximum="{Binding XAxisMax}"
                             Interval="2"
                             HeaderTemplate="{StaticResource headerTemplate}"
                             MajorTickStyle="{StaticResource xAxisLineStyle}"
                             MajorGridLineStyle="{StaticResource xDashedGridLineStyle}">
                        <chart:NumericalAxis.LabelStyle>
                            <chart:LabelStyle LabelFormat="##0'%'"/>
                        </chart:NumericalAxis.LabelStyle>
                    </chart:NumericalAxis>
                </chart:SfCartesianChart.XAxes>

                <!-- Y Axis -->
                <chart:SfCartesianChart.YAxes>
                    <chart:NumericalAxis Minimum="0"
                             Maximum="{Binding YAxisMax}"
                             Interval="5"
                             MajorGridLineStyle="{StaticResource yDashedGridLineStyle}"
                             MajorTickStyle="{StaticResource yAxisLineStyle}">
                        <chart:NumericalAxis.LabelStyle>
                            <chart:LabelStyle LabelFormat="##0'%'"/>
                        </chart:NumericalAxis.LabelStyle>
                    </chart:NumericalAxis>
                </chart:SfCartesianChart.YAxes>

                <!-- Legend -->
                <chart:SfCartesianChart.Legend>
                    <chart:ChartLegend Placement="Right" ItemMargin="5,0,0,0"
                           ToggleSeriesVisibility="True">
                        <chart:ChartLegend.Header>
                            <TextBlock Text="Education Spending by Region"
                                TextWrapping="Wrap"
                                FontSize="15"
                                FontWeight="Bold"/>
                        </chart:ChartLegend.Header>
                    </chart:ChartLegend>
                           
                </chart:SfCartesianChart.Legend>

                <!-- Series -->
                <chart:SfCartesianChart.Series>
                    <chart:ScatterSeries ItemsSource="{Binding AsiaData}" XBindingPath="GDPSpent" YBindingPath="GovtSpent" PointHeight="13" PointWidth="13" LegendIcon="Rectangle" Label="Asia" EnableTooltip="True" TooltipTemplate="{StaticResource customTooltipTemplate}" Fill="#2B6063"/>
                    <chart:ScatterSeries ItemsSource="{Binding NorthAmericaData}" XBindingPath="GDPSpent" YBindingPath="GovtSpent" PointHeight="13" PointWidth="13" LegendIcon="Rectangle" Label="NorthAmerica" EnableTooltip="True" TooltipTemplate="{StaticResource customTooltipTemplate}" Fill="#E7B3E2"/>
                    <chart:ScatterSeries ItemsSource="{Binding SouthAmericaData}" XBindingPath="GDPSpent" YBindingPath="GovtSpent" PointHeight="13" PointWidth="13" LegendIcon="Rectangle" Label="SouthAmerica" EnableTooltip="True" TooltipTemplate="{StaticResource customTooltipTemplate}" Fill="#449472"/>
                    <chart:ScatterSeries ItemsSource="{Binding AfricaData}" XBindingPath="GDPSpent" YBindingPath="GovtSpent" PointHeight="13" PointWidth="13" LegendIcon="Rectangle" Label="Africa" EnableTooltip="True" TooltipTemplate="{StaticResource customTooltipTemplate}" Fill="#E1C86E"/>
                    <chart:ScatterSeries ItemsSource="{Binding EuropeData}" XBindingPath="GDPSpent" YBindingPath="GovtSpent" PointHeight="13" PointWidth="13" LegendIcon="Rectangle" Label="Europe" EnableTooltip="True" TooltipTemplate="{StaticResource customTooltipTemplate}" Fill="#9C5F2D"/>
                    <chart:ScatterSeries ItemsSource="{Binding OceaniaData}" XBindingPath="GDPSpent" YBindingPath="GovtSpent" PointHeight="13" PointWidth="13" LegendIcon="Rectangle" Label="Oceania" EnableTooltip="True" TooltipTemplate="{StaticResource customTooltipTemplate}" Fill="#F59B7A"/>
                </chart:SfCartesianChart.Series>

            </chart:SfCartesianChart>

            <slider:SfSlider Grid.Row="1"
                Minimum="2000"
                Maximum="2024"
                MaximumLabelsCount="1"
                Interval="2"
                ActiveTrackFill="Gray"
                InactiveTrackFill="LightGray"
                ThumbOverlayFill="Gray"
                ThumbWidth="20"
                ThumbHeight="20"
                ThumbBackground="Gray"
                Value="{Binding SelectedYear, Mode=TwoWay}"
                ShowToolTip="False"
                StepFrequency="1"
                ShowDividers="True"
                DividerHeight="4"
                DividerWidth="4"
                Margin="10"
                ShowLabels="True"/>
        </Grid>
    </Border>
</Window>